---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header class="bg-linear-to-r from-white to-black relative z-50">
  <nav class="flex p-4 h-24 items-center justify-between">
    <div class="flex text-5xl shrink-0 items-center font-nasa mix-blend-difference text-white">
      TARAGAY
    </div>

    <button
  id="nav-toggle"
  class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white"
  aria-controls="primary-nav"
  aria-expanded="false"
  aria-label="Men√ºy√º a√ß/kapat"
  type="button"
>
  <span class="sr-only">Men√ºy√º a√ß/kapat</span>
  <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
  </svg>
</button>

    <div id="primary-nav" class="hidden sm:ml-6 sm:block">
      <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
        <a href="/" class="px-3 py-2 text-md mix-blend-difference text-white">Ana Sayfa</a>

        <!-- üü° Yeni √úr√ºnler Linki -->
        <a href="/urunler" class="px-3 py-2 text-md mix-blend-difference text-white">√úr√ºnler</a>

        <a href="/hakkimizda" class="px-3 py-2 text-md mix-blend-difference text-white">Hakkƒ±mƒ±zda</a>
        <a href="/ekibimiz" class="px-3 py-2 text-md mix-blend-difference text-white">Ekibimiz</a>

        <!-- üîΩ Ba≈üvurular Dropdown Men√ºs√º -->
        <div class="relative group">
          <a id="menu-basvurular-trigger" aria-haspopup="true" aria-expanded="false" href="#"
            class="px-3 py-2 text-md mix-blend-difference text-white inline-block"
          >Ba≈üvurular</a>
          <ul
            class="absolute left-0 top-full hidden w-72 rounded-md bg-white/20 text-white text-[15px] shadow-lg backdrop-blur opacity-0 group-hover:opacity-100 hover:opacity-100 focus-within:opacity-100 transition-opacity duration-200 group-hover:block hover:block focus-within:block" 
           id="menu-basvurular-dropdown">
            <li>
              <a
                href="https://forms.gle/dYwdF6eTEquCkMsQ7"
                target="_blank"
                rel="noopener noreferrer"
                class="block px-4 py-2 hover:bg-white/20 flex items-center justify-between"
              >
                <span>Dikey ƒ∞ni≈üli Roket Yarƒ±≈ümasƒ±</span>
                <span class="ml-2 text-emerald-300 font-semibold">(ba≈üvur)</span>
              </a>
            </li>
            <li>
              <a href="/basvurular#ortak-proje" class="block px-4 py-2 hover:bg-white/20">
                Ortak Proje Ba≈üvurusu
              </a>
            </li>
            <li>
              <a href="/basvurular#iletisim" class="block px-4 py-2 hover:bg-white/20">
                ƒ∞leti≈üim
              </a>
            </li>
          </ul>
        </div>
        <!-- üîº -->

        <a href="/galeri" class="px-3 py-2 text-md mix-blend-difference text-white">Galeri</a>
        <a href="/bize-ulasin" class="px-3 py-2 text-md mix-blend-difference text-white">Bize Ula≈üƒ±n</a>
      </div>
    </div>
  <script is:inline>
  (function(){
    var toggle = document.getElementById('nav-toggle');
    var nav = document.getElementById('primary-nav');
    if (toggle && nav) {
      toggle.addEventListener('click', function(){
        var isHidden = nav.classList.contains('hidden');
        if (isHidden) {
          nav.classList.remove('hidden');
          toggle.setAttribute('aria-expanded','true');
          document.body.classList.add('overflow-hidden');
        } else {
          nav.classList.add('hidden');
          toggle.setAttribute('aria-expanded','false');
          document.body.classList.remove('overflow-hidden');
        }
      });

      // Close when clicking outside on mobile
      document.addEventListener('click', function(e){
        if (window.matchMedia('(max-width: 640px)').matches) {
          if (!nav.contains(e.target) && !toggle.contains(e.target)) {
            if (!nav.classList.contains('hidden')){
              nav.classList.add('hidden');
              toggle.setAttribute('aria-expanded','false');
              document.body.classList.remove('overflow-hidden');
            }
          }
        }
      });

      // Close with ESC
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape') {
          if (!nav.classList.contains('hidden')){
            nav.classList.add('hidden');
            toggle.setAttribute('aria-expanded','false');
            document.body.classList.remove('overflow-hidden');
          }
        }
      });

      // Reset to hidden on resize up
      window.addEventListener('resize', function(){
        if (!window.matchMedia('(max-width: 640px)').matches) {
          nav.classList.add('hidden');
          toggle.setAttribute('aria-expanded','false');
          document.body.classList.remove('overflow-hidden');
        }
      });
    }

    // Ba≈üvurular dropdown: click-to-toggle on mobile
    var basvuruTrigger = document.getElementById('menu-basvurular-trigger');
    var basvuruDropdown = document.getElementById('menu-basvurular-dropdown');

    function isMobile(){ return window.matchMedia('(max-width: 640px)').matches; }

    if (basvuruTrigger && basvuruDropdown) {
      basvuruTrigger.addEventListener('click', function(ev){
        if (isMobile()) {
          ev.preventDefault();
          var hidden = basvuruDropdown.classList.contains('hidden');
          if (hidden) {
            basvuruDropdown.classList.remove('hidden');
            basvuruTrigger.setAttribute('aria-expanded','true');
          } else {
            basvuruDropdown.classList.add('hidden');
            basvuruTrigger.setAttribute('aria-expanded','false');
          }
        }
      });

      // Close Basvurular dropdown when clicking outside (mobile)
      document.addEventListener('click', function(e){
        if (!isMobile()) return;
        if (basvuruDropdown && !basvuruDropdown.classList.contains('hidden')) {
          if (!basvuruDropdown.contains(e.target) && !basvuruTrigger.contains(e.target)){
            basvuruDropdown.classList.add('hidden');
            basvuruTrigger.setAttribute('aria-expanded','false');
          }
        }
      });
    }
  })();
</script>
</nav>
</header>
